---
title: "Check links on new pages"
author: "Steve Simon"
date: "Created 2024-06-25"
output: html_document
---
  
This program looks for key information in the new webpages

```{r setup}
suppressMessages(suppressWarnings(library(glue)))
suppressMessages(suppressWarnings(library(magrittr)))
suppressMessages(suppressWarnings(library(readr)))
suppressMessages(suppressWarnings(library(stringr)))
suppressMessages(suppressWarnings(library(tidyverse)))

load(file="../data/check_new.RData")
load(file="../data/check_old.RData")
```

### create subsets

```{r create}
md %>% 
  filter(miss==0) %>%
  select(yr, fn, stat, base) -> md1
  
html %>% 
  filter(miss==0) %>%
  mutate(base=fn) %>%
  mutate(html_yr=yr) %>%
  select(base, html_yr) -> html1

match1 <- full_join(md1, html1, by="base") 

md %>% 
  filter(miss==0) %>%
  mutate(base=fn) %>%
  mutate(md_yr=yr) %>%
  select(base, md_yr) -> md2
  
html %>% 
  filter(miss==0) %>%
  mutate(base=link) %>%
  select(fn, yr, base) -> html2

match2 <- full_join(html2, md2, by="base") 


```

### mistmatch 1a, new pages that link to non-existent old pages

```{r}
match1 %>% 
  filter(is.na(html_yr))
```

### mistmatch 1b, old pages that link back without recognition

```{r}
match1 %>% 
  filter(is.na(fn))
```

### mistmatch 2a, old pages that link to non-existent new pages

```{r}
match2 %>% 
  filter(is.na(md_yr))
```

### mistmatch 2b, new pages that link back without recognition

```{r}
match2 %>% 
  filter(is.na(fn))
```
