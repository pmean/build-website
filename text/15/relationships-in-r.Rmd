---
title: "PMean: Examining relationships in R"
author: "Steve Simon"
source: "http://blog.pmean.com/relationships-in-r/"
date: "2015-04-03"
categories:
- Blog post
tags:
- R software
output: html_document
---

I'm giving a talk for the Kansas City R Users Group on how to get a
preliminary impression of relationships between pairs of variables. Here
is the R code and output that I will use.

<!---More--->

### Simple measures of association

There are several different ways of measuring bivariate relationships in
a descriptive fashion prior to data analysis. The methods can be largely
grouped into measures of relationship between two continuous variables,
two categorical variables and measures of a relationship between a
categorical variable and a continuous variable.

```{r}
fn <- "http://lib.stat.cmu.edu/DASL/Datafiles/homedat.html"
h0 <- readLines(fn)
n <- length(h0)
print(n)
```

    ## [1] 165

```{r}
head(h0)
```


```{r}
tail(h0)
```

```{r}
the.data.line <- grep("The Data:",h0)
print(the.data.line)
```

```{r}
h1 <- h0[(the.data.line+4):(n-1)]
head(h1)
```

```{r}
tail(h1)
```

```{r}
h2 <- strsplit(h1,"\t")
head(h2)
```

```{r}
tail(h2)
```

```{r}
h3 <- as.numeric(unlist(h2))
```

```{r}
head(h3)
```

```{r}
tail(h3)
```

```{r}
h4 <- matrix(h3,ncol=8,byrow=TRUE)
head(h4)
```

```{r}
tail(h4)
```

```{r}
var.names.line <- the.data.line+2
print(h0[var.names.line])
```

```{r}
var.names <- strsplit(h0[var.names.line]," ")
print(var.names)
```

```{r}
var.names <- unlist(var.names)
print(var.names)
```

```{r}
var.names <- var.names[nchar(var.names)>0]
print(var.names)
```

```{r}
var.names <- tolower(var.names)
print(var.names)
```

```{r}
dimnames(h4)[[2]] <- var.names
head(h4)
```

```{r}
tail(h4)
```


```{r}
h5 <- data.frame(h4)
head(h5)
```

```{r}
tail(h5)
```

The best graphical summary of two continuous variables is a scatterplot.
You should include a smoothing curve or spline model to the graph to
emphasize the general trend and any departures from linearity.

```{r}
plot(h5sqft,h5$price)
lines(lowess(h5price~h5$sqft))
```



```{r}
plot(h5age,h5$price)
sb <- is.finite(h5age)
lines(lowess(h5price[sb]~h5$age[sb]))
```



The best numeric summary of two continuous variables is a correlation
coefficient.

```{r}
cor(h5[,c("price","sqft","age")],use="pairwise.complete.obs")
```

Correlations should always be rounded to two or maybe even just one
significant digit.

```{r}
round(cor(h5[,c("price","sqft","age")],use="pairwise.complete.obs"),1)
```

Anything larger than 0.7 or smaller than -0.7 is a strong linear
relationship. Anything between 0.3 and 0.7 or between -0.3 and -0.7 is a
weak linear relationship. Anything between -0.3 and 0.3 represents
little or no linear relationship.

The best graphical summary between a continuous variable and a
categorical variable is a boxplot.

```{r}
boxplot(h5price~h5$feats)
```


```{r}
boxplot(h5price~h5$ne)
```



```{r}
boxplot(h5price~h5$cust)
```


```{r}
boxplot(h5price~h5$cor)
```




If your categorical variable is binary, you can also use a scatterplot.
The binary variable goes on the y axis and a trend line is critical.

```{r}
plot(h5price,h5$ne)
lines(lowess(h5ne~h5$price))
```




```{r}
plot(h5price,h5$cust)
lines(lowess(h5cust~h5$price))
```




```{r}
plot(h5price,h5$cor)
lines(lowess(h5cor~h5$price))
```



You can also compute a correlaton between a binary variable and a
categorical variable. It is equivalent to the point-bisearial
correlation.

```{r}
round(cor(h5[,c("ne","cust","cor")],h5price),1)
```

Let's save the display of a relationship involving two categorical
variables until another day.


